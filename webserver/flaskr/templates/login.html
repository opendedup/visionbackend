<html>
  <head>

  <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="static/style.css">
<!------ Include the above in your HEAD tag ---------->
  </head>
<body id="LoginForm">
<div class="container">
<div class="login-form">
<div class="main-div">
    <div class="panel">
   <h2>Imagerie Admin Login</h2>
   <p>Please enter your username and password</p>
   </div>
    <form id="Login">

        <div class="form-group">


            <input type="username" class="form-control" id="username" placeholder="Username">

        </div>

        <div class="form-group">

            <input type="password" class="form-control" id="password" placeholder="Password">

        </div>
        <button type="submit" class="btn btn-primary" id="loginbtn">Login</button>

    </form>
    </div>
</div></div></div>
<script>
// Attach a submit handler to the form
$( "#Login" ).submit(function( event ) {

  // Stop form from submitting normally
  event.preventDefault();
  console.log($( this ).serialize());
  // Get some values from elements on the page:
  var $form = $( this ),
    un = $form.find( "input[name='username']" ).val(),
    pwd = $form.find( "input[name='password']" ).val();

  // Send the data using post
  $.ajax({
    url: '/token/auth',
    dataType: 'json',
    type: 'post',
    contentType: 'application/json',
    data: JSON.stringify( { "username": $('#username').val(), "password": $('#password').val() } ),
    processData: false,
    success: function( data, textStatus, jQxhr ){
      if(data['login']==true) {
        $(location).attr('href', '/')
      }else {

      }
    },
    error: function( jqXhr, textStatus, errorThrown ){
        console.log( errorThrown );
    }
});


});
</script>

</body>
</html>
